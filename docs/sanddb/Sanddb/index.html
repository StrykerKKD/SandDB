<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sanddb (sanddb.Sanddb)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">sanddb</a> &#x00BB; Sanddb</nav><header class="odoc-preamble"><h1>Module <code><span>Sanddb</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Database" class="anchored"><a href="#module-Database" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Database/index.html">Database</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Sanddb.Database</code> contains the type of the database and it's internal implementation.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Record_id" class="anchored"><a href="#module-Record_id" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Record_id/index.html">Record_id</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Sanddb.Record_id</code> is the basic record id type, which idetifies a record in the database. It's compatible with base's Set type.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Serializer" class="anchored"><a href="#module-Serializer" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Serializer/index.html">Serializer</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Sanddb.Serializer</code> contains the different kind of serializers that are possible with SandDB.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create_json_database" class="anchored"><a href="#val-create_json_database" class="anchor"></a><code><span><span class="keyword">val</span> create_json_database : 
  <span><span class="xref-unresolved">Lwt_io</span>.file_name <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="Serializer/module-type-Json_serializer/index.html">Serializer.Json_serializer</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Serializer/module-type-Json_serializer/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>(<span class="keyword">module</span> <a href="Database/module-type-T/index.html">Database.T</a>
  <span class="keyword">with</span> <span class="keyword">type</span> <a href="Database/module-type-T/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span></span></code></div><div class="spec-doc"><p><code>Sanddb.create_json_database file_name json_serializer</code> will create a json database based on the provided:</p><ul><li><code>file_name</code> which will be tha base of the database</li><li><code>json_serializer</code> which will be responsible for the serialization between the database and the client This function will return a first class database module, which can be used to communicate with the database.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-create_biniou_database" class="anchored"><a href="#val-create_biniou_database" class="anchor"></a><code><span><span class="keyword">val</span> create_biniou_database : 
  <span><span class="xref-unresolved">Lwt_io</span>.file_name <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="Serializer/module-type-Biniou_serializer/index.html">Serializer.Biniou_serializer</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Serializer/module-type-Biniou_serializer/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>(<span class="keyword">module</span> <a href="Database/module-type-T/index.html">Database.T</a>
  <span class="keyword">with</span> <span class="keyword">type</span> <a href="Database/module-type-T/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span></span></code></div><div class="spec-doc"><p><code>Sanddb.create_biniou_database file_name biniou_serializer</code> will create a biniou database based on the provided:</p><ul><li><code>file_name</code> which will be tha base of the database</li><li><code>biniou_serializer</code> which will be responsible for the serialization between the database and the client This function will return a first class database module, which can be used to communicate with the database.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-read_all_records" class="anchored"><a href="#val-read_all_records" class="anchor"></a><code><span><span class="keyword">val</span> read_all_records : 
  <span><span>(<span class="keyword">module</span> <a href="Database/module-type-T/index.html">Database.T</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Database/module-type-T/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>( <a href="Record_id/index.html#type-t">Record_id.t</a> * <span class="type-var">'a</span>, exn )</span> <span class="xref-unresolved">Stdlib</span>.result</span> list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>Sanddb.read_all_records database unit</code> gives back every database record, both visible and shadowed ones. The result can contain duplicate record ids. The first record in the list is the oldest record and the last one is the newest record. Creates the database file if it doesn't exists.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_visible_records" class="anchored"><a href="#val-read_visible_records" class="anchor"></a><code><span><span class="keyword">val</span> read_visible_records : 
  <span><span>(<span class="keyword">module</span> <a href="Database/module-type-T/index.html">Database.T</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Database/module-type-T/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>( <a href="Record_id/index.html#type-t">Record_id.t</a> * <span class="type-var">'a</span>, exn )</span> <span class="xref-unresolved">Stdlib</span>.result</span> list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>Sanddb.read_visible_records database unit</code> gives back every visible(not shadowed) database record, which also means there is no duplicate record id in the result. The first record in the list is the newest record and the last one is the oldest record. Creates the database file if it doesn't exists.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-insert_record" class="anchored"><a href="#val-insert_record" class="anchor"></a><code><span><span class="keyword">val</span> insert_record : 
  <span><span>(<span class="keyword">module</span> <a href="Database/module-type-T/index.html">Database.T</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Database/module-type-T/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="Record_id/index.html#type-t">Record_id.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>Sanddb.insert_record database data</code> inserts record into the database. The record id is generated automatically and given back as a result. Creates the database file if it doesn't exists.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-insert_shadowing_record" class="anchored"><a href="#val-insert_shadowing_record" class="anchor"></a><code><span><span class="keyword">val</span> insert_shadowing_record : 
  <span><span>(<span class="keyword">module</span> <a href="Database/module-type-T/index.html">Database.T</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Database/module-type-T/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="Record_id/index.html#type-t">Record_id.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="Record_id/index.html#type-t">Record_id.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>Sanddb.insert_record database data</code> inserts record into the database with the given record id. It can shadow an older record if it has the same record id as the new one. Creates the database file if it doesn't exists.</p></div></div></div></body></html>